function updateView(){var f=$(".slider-show"),d=$(".slider-control"),g=false;f.owlCarousel({items:1,dots:false,margin:0,animateIn:"fadeIn",animateOut:"fadeOut",nav:true,navText:["",""],responsive:{0:{autoplay:true},480:{autoplay:false}}});d.owlCarousel({items:5,dots:false,margin:10,center:false,nav:true,navText:["",""]});d.on("changed.owl.carousel",function(l){f.trigger("to.owl.carousel",[l.item.index,300]);$(".owl-item",d).removeClass("on");$(".owl-item",d).eq(l.item.index).addClass("on");g=true}).on("click","a",function(){var l=$(this).data("index");f.trigger("to.owl.carousel",[l,300]);$(".owl-item",d).removeClass("on");$(".owl-item",d).eq(l).addClass("on")});f.on("changed.owl.carousel",function(l){d.trigger("to.owl.carousel",[l.item.index,300])});var k=0,e;var i={getRound:function(l){return(l/1000).toFixed(3)*1000},init:function(l,m){return parseInt(this.getRound(l*m))},jsonFormData:function(m){var l={};$.each(m,function(o,n){l[n.name]=n.value});return l},numPad:function(m,l){return Array((l||2)-String(m).length+1).join("0")+m},formatDate:function(l){return this.numPad(l.getDate())+"-"+this.numPad((l.getMonth()+1))+"-"+l.getFullYear()},renderRow:function(n){var m="<tr>";var l=true;$.each(n,function(o,p){m+='<td class="'+(l?"text-center":"")+'">'+p+"</td>";l=false});m+="</tr>";return m},resetTable:function(l){$("tbody",l).html("")},appendRow:function(l,m){$("tbody",l).append(this.renderRow(m))},clearCost:function(l){$(".options > li > span.cost",l).text("0")},requestCost:function(){$(".price-table").each(function(){var n=$(this);var l=$('select[name="cost_location"]',n).val(),m=$('select[name="cost_year"]',n).val();if(l>0){$.post("/product/get-car-surcharge?id="+$('input[name="item_id"]',n).val(),{location:l,year:m},function(o){if(o){$.each(o,function(p,q){$("#"+p,n).html(parseInt(q).formatNumber(0,",",".")+"đ")})}})}else{i.clearCost(n)}})},getInstallmentTable:function(){var w=$(".display-table-result");if(h>0){var s=i.jsonFormData($("#payment-form").serializeArray());var u=new Date();u.setHours(0,0,0,0);var r=parseFloat(s.interest_rate),n=r/12;i.resetTable(j);var m=h*s.percent;var v={index:0,origin:i.getRound(m).formatNumber(0,",","."),origin_left:0,interest:0,total:0};i.appendRow(j,v);var p=m,l=m/s.time,t={origin_left:0,interest:0,total:0};for(var q=1;q<parseInt(s.time)+1;q++){var o=Math.round(p*n/100);p-=l;u.setMonth(u.getMonth()+1);u.setDate(1);t={origin_left:t.origin_left+l,interest:t.interest+o,total:t.total+l+o};i.appendRow(j,{index:q,origin:i.getRound(p).formatNumber(0,",","."),origin_left:i.getRound(l).formatNumber(0,",","."),interest:i.getRound(o).formatNumber(0,",","."),total:i.getRound(l+o).formatNumber(0,",",".")})}i.appendRow(j,{index:"",origin:"",origin_left:i.getRound(t.origin_left).formatNumber(0,",","."),interest:i.getRound(t.interest).formatNumber(0,",","."),total:i.getRound(t.total).formatNumber(0,",",".")});if(!$(this).hasClass("show")){$(this).addClass("show");w.show()}w.readmore({speed:200,collapsedHeight:600,moreLink:'<div class="wrap-more on"><a href="#" class="lnk lnk-more">Xem thêm</a></div>',lessLink:'<div class="wrap-more"><a href="#" class="lnk lnk-more">Thu gọn</a></div>',afterToggle:function(y,z,x){if(!x){$("html, body").animate({scrollTop:z.offset().top-100},400)}}})}},alert:function(m,l){var n=l||$(".form-dropdown");if($(".alert.alert-red",n).length==0){n.append('<div class="alert alert-red text-center">'+m+"</div>")}return $(".alert.alert-red",n)}};var h=parseInt($("#origin-price").data("origin-price")),a=$("#name-result"),j=$("#table-result");a.text();i.requestCost();i.getInstallmentTable();var b=$(".tab-control"),c=$(".tab-content");$("button",b).click(function(){if(k==0){e=i.alert("Vui lòng chọn nơi mua.");return}else{if(e!==undefined&&e.length>0){e.remove()}}var l=$(this).attr("name");$('button[name!="'+l+'"]').removeClass("active");$('button[name="'+l+'"]').addClass("active");$(".tab-item",c).addClass("hidden");$("#"+l,c).removeClass("hidden")});$("#register").on("shown.bs.modal",function(){window.location.hash="booking-form"});$(window).load(function(){if(window.location.hash=="#booking-form"){$("#register").modal("show")}})}